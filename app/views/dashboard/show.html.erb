<div class="container mt-5">
  <h1 class="mb-4">Welcome, <%= current_user.email %>!</h1>

  <% if current_user.admin? %>
    <!-- Admin Dashboard Content -->
    <div class="card mb-4">
      <div class="card-header">
        Admin Dashboard
      </div>
      <div class="card-body">
        <p>
          Total Tasks: <span class="badge bg-primary"><%= Task.count %></span><br>
          Total Clients: <span class="badge bg-success"><%= User.client.count %></span><br>
          Total Freelancers: <span class="badge bg-info"><%= User.freelancer.count %></span>
        </p>
      </div>
    </div>

    <div class="mb-4">
      <h3>All Tasks</h3>
      <ul class="list-group">
        <% Task.all.each do |task| %>
          <li class="list-group-item">
            <%= link_to task.title, task_path(task) %> - 
            <span class="badge bg-secondary">Status: <%= task.status %></span>
          </li>
        <% end %>
      </ul>
    </div>

    <div>
      <h3>All Reviews</h3>
      <ul class="list-group">
        <% Review.all.each do |review| %>
          <li class="list-group-item">
            Review for <%= link_to review.task.title, task_path(review.task) %>: 
            <span class="badge bg-warning text-dark"><%= review.rating %> stars</span> - <%= review.comment %>
          </li>
        <% end %>
      </ul>
    </div>

  <% elsif current_user.client? %>
    <!-- Client Dashboard Content -->
    <div class="card mb-4">
      <div class="card-header">
        Client Dashboard
      </div>
      <div class="card-body">
        <%= link_to 'Create New Task', new_task_path, class: "btn btn-primary mb-3" %>
        
        <h3>Your Tasks</h3>
        <ul class="list-group">
          <% current_user.tasks_as_client.each do |task| %>
            <li class="list-group-item">
              <%= link_to task.title, task_path(task) %> - 
              <span class="badge bg-secondary">Status: <%= task.status %></span>
            </li>
          <% end %>
        </ul>
      </div>
    </div>

    <div>
      <h3>Your Reviews</h3>
      <ul class="list-group">
        <% current_user.reviews.each do |review| %>
          <li class="list-group-item">
            Review for <%= link_to review.task.title, task_path(review.task) %>: 
            <span class="badge bg-warning text-dark"><%= review.rating %> stars</span> - <%= review.comment %>
          </li>
        <% end %>
      </ul>
    </div>

  <% elsif current_user.freelancer? %>
    <!-- Freelancer Dashboard Content -->
    <div class="card mb-4">
      <div class="card-header">
        Freelancer Dashboard
      </div>
      <div class="card-body">
        <h3>Available Tasks</h3>
        <ul class="list-group">
          <% Task.open_tasks.each do |task| %>
            <li class="list-group-item"><%= link_to task.title, task_path(task) %></li>
          <% end %>
        </ul>
      </div>
    </div>

    <div class="mb-4">
      <h3>Tasks You're Working On</h3>
      <ul class="list-group">
        <% current_user.tasks_as_freelancer.each do |task| %>
          <li class="list-group-item"><%= link_to task.title, task_path(task) %></li>
        <% end %>
      </ul>
    </div>

    <div>
      <h3>Your Reviews</h3>
      <ul class="list-group">
        <% current_user.reviews.each do |review| %>
          <li class="list-group-item">
            Review for <%= link_to review.task.title, task_path(review.task) %>: 
            <span class="badge bg-warning text-dark"><%= review.rating %> stars</span> - <%= review.comment %>
          </li>
        <% end %>
      </ul>
    </div>
  <% end %>
</div>
